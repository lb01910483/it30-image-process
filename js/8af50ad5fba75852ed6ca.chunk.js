(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1029:function(t,e){},1030:function(t,e){},1031:function(t,e){},1032:function(t,e,n){"use strict";var i=n(581);n.n(i).a},1033:function(t,e,n){(t.exports=n(89)(!1)).push([t.i,".image_editor[data-v-88615b3e] {\n  max-width: 1200px;\n  margin: 50px auto;\n  display: flex;\n}\n.image_editor .canvas_container[data-v-88615b3e] {\n    width: 600px;\n}\n.image_editor .editor[data-v-88615b3e] {\n    width: 300px;\n    margin: 20px;\n}\n.image_editor .editor .upload_btn[data-v-88615b3e] {\n      font-size: 14px;\n      line-height: 35px;\n      border-radius: 5px;\n      color: #fff;\n      background-color: #409eff;\n      text-align: center;\n      cursor: pointer;\n      letter-spacing: 2px;\n      width: 100px;\n      position: relative;\n}\n.image_editor .editor .upload_btn > input[type='file'][data-v-88615b3e] {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        font-size: 0px;\n        cursor: pointer;\n}\n.image_editor .editor .button[data-v-88615b3e] {\n      display: inline-block;\n      font-size: 14px;\n      line-height: 35px;\n      border-radius: 5px;\n      color: #fff;\n      background-color: #409eff;\n      text-align: center;\n      cursor: pointer;\n      letter-spacing: 2px;\n      width: 86px;\n      position: relative;\n      margin-right: 10px;\n}\n.image_editor .editor .edit_texts[data-v-88615b3e] {\n      margin-top: 10px;\n      display: flex;\n      align-items: center;\n}\n.image_editor .editor .edit_texts .picker[data-v-88615b3e] {\n        display: flex;\n        width: 80px;\n        margin-left: 10px;\n}\n.image_editor .editor .edit_texts .picker > input[data-v-88615b3e] {\n          margin-left: 10px;\n}\n.image_editor .editor .add_text[data-v-88615b3e] {\n      width: 100%;\n      border: 1px #c9c9c9 solid;\n      font-size: 25px;\n      height: 35px;\n      border-radius: 5px;\n      margin-top: 10px;\n      cursor: pointer;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n}\n.image_editor .editor .add_text[data-v-88615b3e]:hover {\n        background-color: #409eff;\n}\n",""])},1123:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image_editor"},[n("div",{staticClass:"canvas_container"},[n("canvas",{ref:"drawCanvas"})]),t._v(" "),n("div",{staticClass:"editor"},[n("div",{staticClass:"upload_btn button"},[t._v("\n      上傳\n      "),n("input",{attrs:{type:"file",accept:"image/jpg,image/jpeg,image/png"},on:{change:t.getData}})]),t._v(" "),n("div",{staticClass:"button",on:{click:t.getRandomIndex}},[t._v("下張")]),t._v(" "),n("div",{staticClass:"button",on:{click:t.downloadImg}},[t._v("儲存")]),t._v(" "),t._l(t.editTexts,(function(e,i){return n("div",{staticClass:"edit_texts"},[n("el-input",{attrs:{value:e.text},on:{input:function(e){return t.textChange(e,i)}}}),t._v(" "),n("div",{staticClass:"picker"},[t._v("\n        fill:\n        "),n("input",{attrs:{type:"color"},domProps:{value:e.fill},on:{change:function(e){return t.colorChange(e,i)}}})])],1)})),t._v(" "),n("div",{staticClass:"add_text",on:{click:t.addText}},[n("i",{staticClass:"el-icon-plus"})])],2)])};i._withStripped=!0;var a,r=n(92),o=n.n(r),s=n(143),d=n.n(s),c=n(1026),l=n(142),f={name:"ImageEditor",data:function(){return{width:0,height:0,fabricCanvas:null,editTexts:[],currentIndex:0,memes:[]}},methods:{cleanAll:function(){this.fabricCanvas.clear(),this.editTexts=[]},loadImg:function(t){var e=this;this.cleanAll(),c.fabric.Image.fromURL(t,(function(t){var n=600/t.width;e.height=n*t.height,e.width=n*t.width,e.fabricCanvas.setHeight(e.height),e.fabricCanvas.setWidth(e.width);var i=t.set({hoverCursor:"default",selectable:!1});i.scaleToHeight(e.height),i.scaleToWidth(e.width),e.fabricCanvas.add(i),e.addText(),e.fabricCanvas.sendToBack(i)}),{crossOrigin:"Anonymous"})},render:function(){this.fabricCanvas.renderAll()},addText:function(){var t=new c.fabric.IText("點擊編輯",{top:10+50*this.editTexts.length,fill:"#ffffff",stroke:"#000000",fontSize:40,fontFamily:"Microsoft JhengHei, PMingLiU, sans-serif"});this.editTexts.push(t),this.fabricCanvas.add(t),t.centerH()},getData:function(t){var e=t.target.files[0];this.loadImg(Object(l.d)(e))},loadCurrentImg:function(){var t=this.memes[this.currentIndex];this.loadImg(t.url)},getRandomIndex:function(){this.currentIndex=Math.floor(100*Math.random()),this.loadCurrentImg()},getMemesJson:function(){return fetch("https://api.imgflip.com/get_memes").then((function(t){return t.json()}))},colorChange:function(t,e){this.editTexts[e].set("fill",t.target.value),this.render()},textChange:function(t,e){this.editTexts[e].set("text",t),this.render()},downloadImg:function(){var t=this.fabricCanvas.toDataURL({format:"png"}),e=document.createElement("a");e.href=t,e.download="yourname.png",e.click()}},mounted:(a=d()(o.a.mark((function t(){var e,n,i=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMemesJson();case 2:e=t.sent,this.memes=e.data.memes,n=this.$refs.drawCanvas,this.fabricCanvas=new c.fabric.Canvas(n),this.fabricCanvas.on("object:moving",(function(t){var e=t.target;e.setCoords();var n=e.getBoundingRect(),a=n.top,r=n.left,o=n.width,s=n.height;a<0&&(e.top=0),a+s>i.height&&(e.top=i.height-s),r<0&&(e.left=0),r+o>i.width&&(e.left=i.width-o),i.fabricCanvas.renderAll()})),this.loadCurrentImg();case 8:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},h=(n(1032),n(64)),u=Object(h.a)(f,i,[],!1,null,"88615b3e",null);u.options.__file="src/views/ImageEditor/index.vue";e.default=u.exports},581:function(t,e,n){var i=n(1033);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(90).default)("ecf20cde",i,!1,{})}}]);