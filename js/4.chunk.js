(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{471:function(e,t,n){var a=n(547);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("06bf501e",a,!1,{})},472:function(e,t,n){var a=n(549);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("4f9b0c8c",a,!1,{})},546:function(e,t,n){"use strict";var a=n(471);n.n(a).a},547:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,"",""])},548:function(e,t,n){"use strict";var a=n(472);n.n(a).a},549:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,".image_slider[data-v-1bb0a0c2] {\n  margin: 20px 0px 0px;\n}\n",""])},552:function(e,t,n){var a=n(939);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("887e6544",a,!1,{})},553:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image_slider"},[n("Slider",{attrs:{title:"曝光度",min:-100,max:100,value:e.brightness},on:{sliderChange:function(t){return e.sliderChange(t,"brightness")}}}),e._v(" "),n("Slider",{attrs:{title:"對比度",min:-100,max:100,value:e.contrast},on:{sliderChange:function(t){return e.sliderChange(t,"contrast")}}}),e._v(" "),n("Slider",{attrs:{title:"飽和度",min:-100,max:100,value:e.saturation},on:{sliderChange:function(t){return e.sliderChange(t,"saturation")}}}),e._v(" "),n("Slider",{attrs:{title:"細節飽和度",min:-100,max:100,value:e.vibrance},on:{sliderChange:function(t){return e.sliderChange(t,"vibrance")}}}),e._v(" "),n("Slider",{attrs:{title:"暗部",min:-100,max:100,value:e.shadow},on:{sliderChange:function(t){return e.sliderChange(t,"shadow")}}}),e._v(" "),n("Slider",{attrs:{title:"亮部",min:-100,max:100,value:e.hightLight},on:{sliderChange:function(t){return e.sliderChange(t,"hightLight")}}}),e._v(" "),n("Slider",{attrs:{title:"銳利化",min:-100,max:100,value:e.sharpen},on:{sliderChange:function(t){return e.sliderChange(t,"sharpen")}}})],1)};a._withStripped=!0;var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"slider"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("el-slider",{attrs:{value:e.value,min:e.min,max:e.max},on:{input:e.handleChange}})],1)};r._withStripped=!0;var i={name:"Slider",props:{title:{type:String,default:""},max:{type:Number,default:100},min:{type:Number,default:0},value:{type:Number,default:0}},methods:{handleChange:function(e){this.$emit("sliderChange",e)}}},s=(n(546),n(64)),o=Object(s.a)(i,r,[],!1,null,"64355c54",null);o.options.__file="src/components/Slider/index.vue";var l=o.exports,c=n(91);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={name:"ImageSlider",components:{Slider:l},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.c)({brightness:function(e){return e.sliderValue.brightness},contrast:function(e){return e.sliderValue.contrast},saturation:function(e){return e.sliderValue.saturation},vibrance:function(e){return e.sliderValue.vibrance},shadow:function(e){return e.sliderValue.shadow},hightLight:function(e){return e.sliderValue.hightLight},sharpen:function(e){return e.sliderValue.sharpen}})),methods:{sliderChange:function(e,t){this.$store.commit("CHANGE_SLIDER_VALUE",{key:t,val:e})}}},p=(n(548),Object(s.a)(h,a,[],!1,null,"1bb0a0c2",null));p.options.__file="src/components/ImageSlider/index.vue";t.a=p.exports},937:function(e,t){e.exports="assets/video.mp4"},938:function(e,t,n){"use strict";var a=n(552);n.n(a).a},939:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,".video video[data-v-ead17a18] {\n  display: none;\n}\n.video .image_container[data-v-ead17a18] {\n  margin: 20px 0px 0px;\n  display: flex;\n}\n.video .image_container .image_editor[data-v-ead17a18] {\n    margin: 0px 0px 0px 20px;\n    width: 200px;\n}\n.video .image_container .button[data-v-ead17a18] {\n    width: 100%;\n    margin: 10px 0 0 0;\n}\n",""])},941:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isPlay,expression:"isPlay"}]},[e._v(" Fps : "+e._s(e.fps))]),e._v(" "),a("div",{staticClass:"image_container"},[a("video",{ref:"video",style:e.videoStyle,attrs:{src:n(937),autoplay:"",loop:"",muted:""},domProps:{muted:!0},on:{play:e.drawCanvas}}),e._v(" "),a("div",{staticClass:"canvas_container"},[a("canvas",{ref:"drawCanvas"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPlay,expression:"isPlay"}],staticClass:"image_editor"},[a("ImageSlider"),e._v(" "),a("el-input",{attrs:{placeholder:"大家刷一波"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addBarrage(t)}},model:{value:e.barrageInput,callback:function(t){e.barrageInput=t},expression:"barrageInput"}}),e._v(" "),a("el-button",{staticClass:"button",on:{click:e.addBarrage}},[e._v("\r\n        送出\r\n      ")])],1)])])};a._withStripped=!0;var r=n(141),i=n(553),s=n(91);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.ctx=t.getContext("2d"),this.data=[]}var t,n,a;return t=e,(n=[{key:"addBarrage",value:function(e){var t={x:this.canvas.width,y:this.canvas.height*Math.random(),speed:e.speed||10*Math.random()+.5,fontSize:e.fontSize||10*Math.random()+16,color:e.color||"#".concat(((1<<24)*Math.random()|0).toString(16)),text:e.text||"default"};this.data.push(t)}},{key:"draw",value:function(){for(var e=this.data.length-1;e>=0;e-=1){var t=this.data[e];this.ctx.font="".concat(t.fontSize,"px Microsoft JhengHei, PMingLiU, sans-serif");var n=this.ctx.measureText(t.text).width;t.x+n<0?this.data.splice(e,1):(this.ctx.fillStyle=t.color,t.x=t.x-t.speed,this.ctx.fillText(t.text,t.x,t.y))}}}])&&o(t.prototype,n),a&&o(t,a),e}();function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={name:"Video",components:{ImageSlider:i.a},data:function(){return{isPlay:!1,width:0,height:0,fps:0,lastCallTime:0,barrage:null,barrageInput:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(s.c)({sliderValue:function(e){return e.sliderValue}}),{videoStyle:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}}}),methods:{drawCanvas:function(){var e=1e3/(performance.now()-this.lastCallTime);this.fps=e,this.lastCallTime=performance.now();var t=this.$refs.drawCanvas,n=this.$refs.video,a=t.getContext("2d");this.isPlay=!0,a.drawImage(n,0,0,this.width,this.height);var i=a.getImageData(0,0,this.width,this.height),s=Object(r.a)(i,this.sliderValue);a.putImageData(s,0,0),this.barrage.draw(),requestAnimationFrame(this.drawCanvas)},addBarrage:function(){this.barrage.addBarrage({text:this.barrageInput}),this.barrageInput=""}},mounted:function(){var e=window.innerWidth-800,t=(e=e<800?800:e)*(9/16);this.width=e,this.height=t;var n=this.$refs.video,a=this.$refs.drawCanvas;a.width=this.width,a.height=this.height,this.barrage=new l(a),n.play().then((function(){console.log("play video start")})).catch((function(e){console.log("play video error",e)}))}},h=(n(938),n(64)),p=Object(h.a)(d,a,[],!1,null,"ead17a18",null);p.options.__file="src/views/Video/index.vue";t.default=p.exports}}]);