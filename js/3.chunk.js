(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{471:function(e,t,n){var a=n(547);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("06bf501e",a,!1,{})},472:function(e,t,n){var a=n(549);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("4f9b0c8c",a,!1,{})},545:function(e,t,n){var a=n(932);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("5db127b1",a,!1,{})},546:function(e,t,n){"use strict";var a=n(471);n.n(a).a},547:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,"",""])},548:function(e,t,n){"use strict";var a=n(472);n.n(a).a},549:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,".image_slider[data-v-1bb0a0c2] {\n  margin: 20px 0px 0px;\n}\n",""])},550:function(e,t,n){var a=n(934);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(90).default)("5686fec3",a,!1,{})},553:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image_slider"},[n("Slider",{attrs:{title:"曝光度",min:-100,max:100,value:e.brightness},on:{sliderChange:function(t){return e.sliderChange(t,"brightness")}}}),e._v(" "),n("Slider",{attrs:{title:"對比度",min:-100,max:100,value:e.contrast},on:{sliderChange:function(t){return e.sliderChange(t,"contrast")}}}),e._v(" "),n("Slider",{attrs:{title:"飽和度",min:-100,max:100,value:e.saturation},on:{sliderChange:function(t){return e.sliderChange(t,"saturation")}}}),e._v(" "),n("Slider",{attrs:{title:"細節飽和度",min:-100,max:100,value:e.vibrance},on:{sliderChange:function(t){return e.sliderChange(t,"vibrance")}}}),e._v(" "),n("Slider",{attrs:{title:"暗部",min:-100,max:100,value:e.shadow},on:{sliderChange:function(t){return e.sliderChange(t,"shadow")}}}),e._v(" "),n("Slider",{attrs:{title:"亮部",min:-100,max:100,value:e.hightLight},on:{sliderChange:function(t){return e.sliderChange(t,"hightLight")}}}),e._v(" "),n("Slider",{attrs:{title:"銳利化",min:-100,max:100,value:e.sharpen},on:{sliderChange:function(t){return e.sliderChange(t,"sharpen")}}})],1)};a._withStripped=!0;var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"slider"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("el-slider",{attrs:{value:e.value,min:e.min,max:e.max},on:{input:e.handleChange}})],1)};i._withStripped=!0;var r={name:"Slider",props:{title:{type:String,default:""},max:{type:Number,default:100},min:{type:Number,default:0},value:{type:Number,default:0}},methods:{handleChange:function(e){this.$emit("sliderChange",e)}}},o=(n(546),n(64)),s=Object(o.a)(r,i,[],!1,null,"64355c54",null);s.options.__file="src/components/Slider/index.vue";var c=s.exports,l=n(91);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={name:"ImageSlider",components:{Slider:c},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.c)({brightness:function(e){return e.sliderValue.brightness},contrast:function(e){return e.sliderValue.contrast},saturation:function(e){return e.sliderValue.saturation},vibrance:function(e){return e.sliderValue.vibrance},shadow:function(e){return e.sliderValue.shadow},hightLight:function(e){return e.sliderValue.hightLight},sharpen:function(e){return e.sliderValue.sharpen}})),methods:{sliderChange:function(e,t){this.$store.commit("CHANGE_SLIDER_VALUE",{key:t,val:e})}}},f=(n(548),Object(o.a)(g,a,[],!1,null,"1bb0a0c2",null));f.options.__file="src/components/ImageSlider/index.vue";t.a=f.exports},931:function(e,t,n){"use strict";var a=n(545);n.n(a).a},932:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,".image_info[data-v-11a04828] {\n  width: 100%;\n}\n.image_info .container[data-v-11a04828] {\n    display: flex;\n}\n.image_info .rgbaInfo[data-v-11a04828] {\n    width: 100px;\n    border-right: 1px #e3e3e3 solid;\n}\n.image_info .rgbaInfo > div[data-v-11a04828] {\n      margin: 5px 0px;\n}\n.image_info .imgInfo[data-v-11a04828] {\n    margin: 0px 10px;\n}\n.image_info .imgInfo > div[data-v-11a04828] {\n      margin: 10px 0px;\n}\n",""])},933:function(e,t,n){"use strict";var a=n(550);n.n(a).a},934:function(e,t,n){(e.exports=n(89)(!1)).push([e.i,".draw_canvas .upload_btn[data-v-77714d6f] {\n  font-size: 14px;\n  line-height: 35px;\n  border-radius: 5px;\n  color: #fff;\n  background-color: #409eff;\n  text-align: center;\n  cursor: pointer;\n  letter-spacing: 2px;\n  width: 100%;\n  max-width: 150px;\n  position: relative;\n}\n.draw_canvas .upload_btn > input[type='file'][data-v-77714d6f] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    font-size: 0px;\n    cursor: pointer;\n}\n.draw_canvas .center[data-v-77714d6f] {\n  display: flex;\n  justify-content: center;\n}\n.draw_canvas .image_container[data-v-77714d6f] {\n  margin: 20px 0px 0px;\n  display: flex;\n}\n.draw_canvas .image_container .image_editor[data-v-77714d6f] {\n    margin: 0px 0px 0px 20px;\n}\n.draw_canvas .margin_l_20[data-v-77714d6f] {\n  margin-left: 20px;\n}\n",""])},940:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this.$createElement;return(this._self._c||e)("DrawCanvas")};a._withStripped=!0;var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"draw_canvas"},[n("div",{staticClass:"center"},[n("div",{staticClass:"upload_btn"},[e._v("\r\n      上傳\r\n      "),n("input",{attrs:{type:"file",accept:"image/jpg,image/jpeg,image/png"},on:{change:e.getData}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgWidth,expression:"imgWidth"}],staticClass:"upload_btn margin_l_20",on:{click:e.saveImg}},[e._v("\r\n      下載\r\n    ")])]),e._v(" "),n("div",{staticClass:"image_container"},[n("div",{staticClass:"canvas_container"},[n("canvas",{ref:"drawCanvas",on:{mousemove:e.handleMouseMove}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imgWidth,expression:"imgWidth"}],staticClass:"image_editor"},[n("ImageInfo",{attrs:{rgbaInfo:e.rgbaInfo,width:e.imgWidth,height:e.imgHeight}}),e._v(" "),n("ImageSlider")],1)])])};i._withStripped=!0;var r=n(141),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image_info"},[n("el-card",[n("div",{staticClass:"container"},[n("div",{staticClass:"rgbaInfo"},[n("div",[e._v("R: "+e._s(e.rgbaInfo[0]))]),e._v(" "),n("div",[e._v("G: "+e._s(e.rgbaInfo[1]))]),e._v(" "),n("div",[e._v("B: "+e._s(e.rgbaInfo[2]))])]),e._v(" "),n("div",{staticClass:"imgInfo"},[n("div",[e._v("寬度: "+e._s(e.width))]),e._v(" "),n("div",[e._v("高度: "+e._s(e.height))])])]),e._v(" "),n("div",{ref:"echart",staticStyle:{width:"200px",height:"80px"}})])],1)};o._withStripped=!0;var s=n(190),c=n(634),l={name:"ImageInfo",props:{width:{type:Number,required:!0},height:{type:Number,required:!0},rgbaInfo:{type:Array,required:!0}},methods:{calcuateHistogram:function(e){var t=s.calculateBrightness(e.data);this.echart.setOption({xAxis:{min:-5,max:260,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},yAxis:{show:!1,max:function(e){return e.max}},grid:{left:0,top:0,right:0,bottom:10},series:[{type:"bar",data:t,large:!0}]},!0,!0)}},mounted:function(){this.echart=c.init(this.$refs.echart,{}),this.$root.$on("imgChange",this.calcuateHistogram)}},u=(n(931),n(64)),d=Object(u.a)(l,o,[],!1,null,"11a04828",null);d.options.__file="src/components/ImageInfo/index.vue";var g=d.exports,f=n(553),p=n(91);function h(e,t,n,a,i,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b,_,w={name:"DrawCanvas",components:{ImageInfo:g,ImageSlider:f.a},data:function(){return{rgbaInfo:[],imgWidth:0,imgHeight:0,originalData:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(p.b)(["editImageData"]),{},Object(p.c)({sliderValue:function(e){return e.sliderValue}})),methods:{drawImage:function(e){var t=this.$refs.drawCanvas,n=t.getContext("2d"),a=window.innerWidth-800,i=(a=a<800?800:a)*(9/16);t.width=a,t.height=i,n.drawImage(e,0,0,a,i);var r=n.getImageData(0,0,a,i);this.$store.commit("CHANGE_STATE_VALUE",{key:"originalEditData",val:r})},getData:(b=regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,Object(r.b)(n);case 3:a=e.sent,this.drawImage(a.img),this.imgWidth=a.width,this.imgHeight=a.height,this.originalData=a;case 8:case"end":return e.stop()}}),e,this)})),_=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=b.apply(e,t);function r(e){h(i,n,a,r,o,"next",e)}function o(e){h(i,n,a,r,o,"throw",e)}r(void 0)}))},function(e){return _.apply(this,arguments)}),getImageInfo:function(e,t){return this.$refs.drawCanvas.getContext("2d").getImageData(e,t,1,1).data},handleMouseMove:function(e){var t=e.offsetX,n=e.offsetY;this.rgbaInfo=Array.from(this.getImageInfo(t,n))},updateImage:function(e){this.$refs.drawCanvas.getContext("2d").putImageData(e,0,0)},saveImg:function(){var e=this.originalData,t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e.img,0,0);var a=n.getImageData(0,0,e.width,e.height),i=(performance.now(),Object(r.a)(a,this.sliderValue));performance.now();n.putImageData(i,0,0),t.toBlob((function(e){console.log(e);var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="yourname.jpeg",n.click(),URL.revokeObjectURL(t)}),"image/jpeg",1)}},watch:{editImageData:function(e){this.updateImage(e),this.$root.$emit("imgChange",e)}},mounted:function(){}},x=(n(933),Object(u.a)(w,i,[],!1,null,"77714d6f",null));x.options.__file="src/components/DrawCanvas/index.vue";var y={name:"App",components:{DrawCanvas:x.exports}},C=Object(u.a)(y,a,[],!1,null,null,null);C.options.__file="src/views/Index.vue";t.default=C.exports}}]);